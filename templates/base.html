{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="LightUs">
  <meta name="author" content="GeeksLabs">
  <meta name="keyword" content="Another creation by JET, tap him on 0781109017">
  <link rel="shortcut icon" href="{% static 'img/favicon.png' %} ">

  <title>LightUs</title>

  <!-- Bootstrap CSS -->
  <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <!-- bootstrap theme -->
  <link href="{% static 'css/bootstrap-theme.css' %}" rel="stylesheet">
  <!--external css-->
  <!-- font icon -->
  <link href="{% static 'css/elegant-icons-style.css' %}" rel="stylesheet" />
  <link href="{% static 'css/font-awesome.min.cs' %}s" rel="stylesheet" />
  <!-- full calendar css-->
  <link href="{% static 'assets/fullcalendar/fullcalendar/bootstrap-fullcalendar.css' %}" rel="stylesheet" />
  <link href="{% static 'assets/fullcalendar/fullcalendar/fullcalendar.css' %}" rel="stylesheet" />
  <!-- easy pie chart-->
  <link href="{% static 'assets/jquery-easy-pie-chart/jquery.easy-pie-chart.css' %}" rel="stylesheet" type="text/css" media="screen" />
  <!-- owl carousel -->
  <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}" type="text/css">
  <link href="{% static 'css/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet">
  <!-- Custom styles -->
  <link rel="stylesheet" href="{% static 'css/fullcalendar.css' %}">
  <link href="{% static 'css/widgets.css' %}" rel="stylesheet">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">
  <link href="{% static 'css/style-responsive.css' %}" rel="stylesheet" />
  <link href="{% static 'css/xcharts.min.css' %}" rel=" stylesheet">
  <link href="{% static 'css/jquery-ui-1.10.4.min.css' %}" rel="stylesheet">
    {% block css %}

    {% endblock css %}
  <!-- =======================================================
    Theme Name: NiceAdmin
    Theme URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
    Author: BootstrapMade
    Author URL: https://bootstrapmade.com
  ======================================================= -->
</head>

<body style="background-color:#02103d">
  <!-- container section start -->
  <section id="container" class="">


    <header class="header" style="background-color:#02103d">
      <div class="toggle-nav">
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"><i class="icon_menu"></i></div>
      </div>
      <!--logo start-->
      <a href="{% url 'payment:home' %}" class="logo">Light<span class="lite">Us <i class="text-warning fa fa-lightbulb-o"></i></span></a>
      <!--logo end-->

      <div class="top-nav notification-row">
        <!-- notificatoin dropdown start-->
        <ul class="nav pull-right top-menu">
          <!-- alert notification start-->
          <li id="alert_notificatoin_bar" title="History">
            <a href="{% url 'payment:history' %}">
                <i class="fa fa-history"></i>
{#                <span class="badge bg-important">7</span>#}
            </a>
          </li>
          <!-- alert notification end-->
          <!-- user login dropdown start-->
          <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="profile-ava">
                                {% if user.profile.dp %}
                                    <img alt="" style="max-height: 35px; max-width: 50px;" class="avatar" src="{{ user.profile.dp.url }}">
                                {% endif %} 
                            </span>
                            <span class="username">{{ user.get_full_name }}</span>
                            <b class="caret"></b>
                        </a>
            <ul class="dropdown-menu extended logout">
              <div class="log-arrow-up"></div>
              <li class="eborder-top">
                <a href="{% url 'payment:profile' %}"><i class="icon_profile"></i> My Profile</a>
              </li>
              <li>
                <a href="{% url 'payment:logout' %}"><i class="icon_key_alt"></i> Log Out</a>
              </li>
            </ul>
          </li>
          <!-- user login dropdown end -->
        </ul>
        <!-- notificatoin dropdown end-->
      </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside style="background-color:#02103d !important;">
      <div id="sidebar" class="nav-collapse" style="background-color:#02103d !important;">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu">
          <li class="active">
            <a class="" href="{% url 'payment:home' %}">
                          <i class="icon_house_alt"></i>
                          <span>Home</span>
                      </a>
          </li>
            <li class="active">
            <a class="" href="{% url 'payment:community_mine' %}">
                          <i class="fa fa-globe"></i>
                          <span>My community</span>
                      </a>
          </li>
            <li class="active">
            <a class="" href="{% url 'payment:history' %}">
                          <i class="fa fa-history"></i>
                          <span>History</span>
                      </a>
          </li>
             <li class="active">
            <a class="" href="{% url 'payment:profile' %}">
                          <i class="fa fa-user-circle"></i>
                          <span>My profile</span>
                      </a>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content">

      <section class="wrapper">
        {% if messages %}
            {% for message in messages %}
                <div class="alert {{ message.tags }} m-2" id="msg" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
{#      entry point of other pages  #}
{% if user.is_authenticated %}
        {% block content %}

          {% endblock content %}
          {% else%}
          {% include 'login.html' %}
          {% endif %}
      </section>

    </section>
  </section>

  <footer class=" text-center navbar-fixed-bottom">

      <div class="fixed-bottom mx-auto" style="bottom: 0%">
        <div class="credits">
          Copyright &copy; {% now "M Y" %}
        </div>
      </div>
  </footer>

  <div class="position-fixed d-none top-right-0 end-0 p-3" style="z-index: 11">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-body" id="toastBody">
    </div>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
</div>


<!-- javascripts -->
  <script src="https://checkout.flutterwave.com/v3.js"></script>
  <script src="{% static 'js/jquery.js' %}"></script>
  <script src="{% static 'js/jquery-ui-1.10.4.min.js' %}"></script>
  <script src="{% static 'js/jquery-1.8.3.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'js/jquery-ui-1.9.2.custom.min.js' %}"></script>
  <!-- bootstrap -->
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <!-- nice scroll -->
  <script src="{% static 'js/jquery.scrollTo.min.js' %}"></script>
  <script src="{% static 'js/jquery.nicescroll.js' %}" type="text/javascript"></script>
  <!-- charts scripts -->
  <script src="{% static 'assets/jquery-knob/js/jquery.knob.js' %}"></script>
  <script src="{% static 'js/jquery.sparkline.js' %}" type="text/javascript"></script>
  <script src="{% static 'assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js' %}"></script>
  <script src="{% static 'js/owl.carousel.js' %}"></script>
  <!-- jQuery full calendar -->
  <<script src="{% static 'js/fullcalendar.min.js' %}"></script>
    <!-- Full Google Calendar - Calendar -->
    <script src="{% static 'assets/fullcalendar/fullcalendar/fullcalendar.js' %}"></script>
    <!--script for this page only-->
    <script src="{% static 'js/calendar-custom.js' %}"></script>
    <script src="{% static 'js/jquery.rateit.min.js' %}"></script>
    <!-- custom select -->
    <script src="{% static 'js/jquery.customSelect.min.js' %}"></script>
    <script src="{% static 'assets/chart-master/Chart.js' %}"></script>

    <!--custome script for all page-->
    <script src="{% static 'js/scripts.js' %}"></script>
    <!-- custom script for this page-->
    <script src="{% static 'js/sparkline-chart.js' %}"></script>
    <script src="{% static 'js/easy-pie-chart.js' %}"></script>
    <script src="{% static 'js/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'js/jquery-jvectormap-world-mill-en.js' %}"></script>
    <script src="{% static 'js/xcharts.min.js' %}"></script>
    <script src="{% static 'js/jquery.autosize.min.js' %}"></script>
    <script src="{% static 'js/jquery.placeholder.min.js' %}"></script>
    <script src="{% static 'js/gdp-data.js' %}"></script>
    <script src="{% static 'js/morris.min.js' %}"></script>
    <script src="{% static 'js/sparklines.js' %}"></script>
    <script src="{% static 'js/charts.js' %}"></script>
    <script src="{% static 'js/jquery.slimscroll.min.js' %}"></script>
  {% block scripts %}
  
  {% endblock %}
    <script>
        function toaster(message, duration=5000){
            var toastLiveExample = document.getElementById('liveToast')
            if (message ==""){
                console.error("Toaster requires a message")
            }
            $('#toastBody').text(message)
            var toast = new bootstrap.Toast(toastLiveExample)
            setTimeout(function () {
                toast.show()
            }, duration)

        }

        setTimeout(function(){
          if ($('#msg').length > 0) {
            $('#msg').remove();
          }
        }, 5000)

        $('#signin').submit(function (e){
            e.preventDefault()
            var data = $(this).serialize()
            var url = $(this).attr('action')
            $.ajax({
                url:url,
                data:data,
                type: 'post',
                success: function (res){
                    if (res.error){
                        alert(res.error)
                    }else {
                        {#toaster(res.message)#}
                        window.location.href = "/"
                    }
                }
            })
        })

        $('#signup').submit(function (e){
            e.preventDefault()
            var data = $(this).serialize()
            var url = $(this).attr('action')
            $.ajax({
                url:url,
                data:data,
                type: 'post',
                success: function (res){
                    if (res.error){
                        alert(res.error)
                    }else {
                        {#toaster(res.message)#}
                        window.location.href = "/"
                    }
                }
            })
        })

        $('#loginbtn').click(function (e) {
            $('#signup').css("display", "none")
            $('#signup').trigger('reset')
            $('#signin').css("display", "block")
        })



        $("#signupbtn").click( function (e) {
            $('#signup').css("display", "block")
            $('#signin').trigger('reset')
            $('#signin').css("display", "none")
        })
      //knob
      $(function() {
        $(".knob").knob({
          'draw': function() {
            $(this.i).val(this.cv + '%')
          }
        })
      });

      //carousel
      $(document).ready(function() {
        $("#owl-slider").owlCarousel({
          navigation: true,
          slideSpeed: 300,
          paginationSpeed: 400,
          singleItem: true

        });
      });

      //custom select box

      $(function() {
        $('select.styled').customSelect();
      });

      /* ---------- Map ---------- */
      $(function() {
        $('#map').vectorMap({
          map: 'world_mill_en',
          series: {
            regions: [{
              values: gdpData,
              scale: ['#000', '#000'],
              normalizeFunction: 'polynomial'
            }]
          },
          backgroundColor: '#eef3f7',
          onLabelShow: function(e, el, code) {
            el.html(el.html() + ' (GDP - ' + gdpData[code] + ')');
          }
        });
      });
    </script>

</body>

</html>